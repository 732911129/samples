<title>API Console</title>
<fieldset>
  <legend>GET Echo</legend>
  <form method=GET action=/usfe/server/api/v1/myapp/echo>
    <input type=submit>
  </form>
</fieldset>
<fieldset>
  <legend>POST Echo</legend>
  <form method=POST action=/usfe/server/api/v1/myapp/echo>
    <input type=submit>
  </form>
</fieldset>
<fieldset>
  <legend>POST Patch</legend>
  <form id=patch method=POST action=/usfe/server/api/v1/myapp/patch>
    <input type=submit>
  </form>
</fieldset>
<script>
  const patch = document.querySelector( '#patch' ),
    create_patch = [
      {
        kind : 'human',
        slots : {
          name : { kind : 'string', string_value :  'tom' },
          age : { kind : 'string', string_value : '36' }
        }
      }
    ];
  patch.addEventListener( 'submit', e => {
    e.preventDefault();
    const uri = '//' + location.host + patch.getAttribute( 'action' ),
      exchange = new XMLHttpRequest();
    exchange.addEventListener( 'readystatechange', r => {
      if( exchange.readyState == 4 && exchange.status == 200 ) console.log( exchange.responseText );
    });
    exchange.open( patch.getAttribute( 'method' ), uri );
    exchange.send( JSON.stringify( create_patch ) );
  } );
  
</script>
