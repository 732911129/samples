<body>
  <h1>This is a demo of decorators and type checking</h1>
  <script src=decorators.js></script>
  <script src=type-checking.js></script>
  <script>
    "use strict";

    class Pear {
      [ T`fun1 ${{ a : String, b : String, c : Number, d : Array }} -> ${ Array }` ](){}
      fun1( a, b, c, d ) {
        const x = Array( c + 1 ).join(a+b+'.').split(".");
        x.pop();
        d.push( ...x );
        return d;
      }
      [ T `exchanger ${{ 
            method : String, 
            uri : URL, 
            payload : Object, 
            callback : Function  
          }} -> ${ XMLHttpRequest }` ](){}

      exchanger( method, uri, payload, callback ) {
        const exchange = new XMLHttpRequest();
        exchange.addEventListener( 'readystatechange', e => {
          if( exchange.readyState == 4 && exchange.status == 200 )
            callback( exchange );
        } );
        exchange.open( method, uri );
        setTimeout( () => exchange.send( payload ), 10 );
        return exchange;
      }
    }
    apply_decorators(Pear);

    const apear = new Pear();
  </script>
</body>

