jarname=$1
entrypoint=$2
staging=~/jar.io/tmp/build_staging
build=~/jar.io/tmp/build

# clean

echo "Cleaning build directory..."
rm -rf $build

# make build directories 

echo "Making build directories..."
mkdir -p $build/classes
mkdir -p $build/jar

# make sources

echo "Collecting sources..."
cd $staging
find . -name "*.java" > sources.txt

echo "Compiling..."
javac @sources.txt -d $build/classes

echo "Building jar..."
cd $build
jar -cvfe ./jar/$jarname.jar $entrypoint -C ./classes . 

echo "Done."

